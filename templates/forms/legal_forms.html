{% extends "base_nyaya.html" %}

{% block title %}Smart Legal Forms - Nyaya{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="fw-bold">Smart Legal Forms</h1>
        <p class="lead text-muted">Generate legal documents with AI-guided assistance</p>
    </div>
    
    <div class="row">
        <div class="col-lg-8">
            <div class="row">
                <!-- Consumer Complaint -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-user-shield text-primary" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">Consumer Complaint</h5>
                            <p class="text-muted">File complaints against unfair trade practices or defective products</p>
                            <button class="btn btn-primary" onclick="startForm('consumer_complaint')">Create Form</button>
                        </div>
                    </div>
                </div>
                
                <!-- Legal Notice -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-file-invoice text-warning" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">Legal Notice</h5>
                            <p class="text-muted">Send formal legal notices for various disputes and demands</p>
                            <button class="btn btn-primary" onclick="startForm('legal_notice')">Create Form</button>
                        </div>
                    </div>
                </div>
                
                <!-- RTI Application -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-eye text-info" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">RTI Application</h5>
                            <p class="text-muted">Right to Information applications for government transparency</p>
                            <button class="btn btn-primary" onclick="startForm('rti_application')">Create Form</button>
                        </div>
                    </div>
                </div>
                
                <!-- Rent Agreement -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-home text-success" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">Rent Agreement</h5>
                            <p class="text-muted">Create comprehensive rental agreements for properties</p>
                            <button class="btn btn-primary" onclick="startForm('rent_agreement')">Create Form</button>
                        </div>
                    </div>
                </div>
                
                <!-- Employment Contract -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-briefcase text-danger" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">Employment Contract</h5>
                            <p class="text-muted">Draft employment agreements and job contracts</p>
                            <button class="btn btn-primary" onclick="startForm('employment_contract')">Create Form</button>
                        </div>
                    </div>
                </div>
                
                <!-- Will/Testament -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-scroll text-secondary" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">Will & Testament</h5>
                            <p class="text-muted">Create legally valid wills and inheritance documents</p>
                            <button class="btn btn-primary" onclick="startForm('will_testament')">Create Form</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4">
            <div class="card shadow">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-info-circle"></i> How It Works</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex mb-3">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <span class="fw-bold">1</span>
                        </div>
                        <div>
                            <h6>Choose Form Type</h6>
                            <p class="small text-muted">Select the legal document you need</p>
                        </div>
                    </div>
                    
                    <div class="d-flex mb-3">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <span class="fw-bold">2</span>
                        </div>
                        <div>
                            <h6>Fill Details</h6>
                            <p class="small text-muted">Answer guided questions with AI assistance</p>
                        </div>
                    </div>
                    
                    <div class="d-flex mb-3">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <span class="fw-bold">3</span>
                        </div>
                        <div>
                            <h6>Generate Document</h6>
                            <p class="small text-muted">Get a professionally formatted legal document</p>
                        </div>
                    </div>
                    
                    <div class="d-flex">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                            <span class="fw-bold">4</span>
                        </div>
                        <div>
                            <h6>Review & Download</h6>
                            <p class="small text-muted">Review with a lawyer and download PDF</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card shadow mt-3">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-shield-alt"></i> Legal Compliance</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Indian law compliant templates</li>
                        <li><i class="fas fa-check text-success"></i> State-specific variations included</li>
                        <li><i class="fas fa-check text-success"></i> Regular legal updates</li>
                        <li><i class="fas fa-check text-success"></i> Professional review recommended</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Form Generation Modal -->
<div class="modal fade" id="formModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="formModalTitle">Generate Legal Document</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="formModalBody">
                <!-- Form content will be loaded here -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function startForm(formType) {
    const modal = new bootstrap.Modal(document.getElementById('formModal'));
    const modalTitle = document.getElementById('formModalTitle');
    const modalBody = document.getElementById('formModalBody');
    
    // Set modal title based on form type
    const formTitles = {
        'consumer_complaint': 'Consumer Complaint Form',
        'legal_notice': 'Legal Notice Generator',
        'rti_application': 'RTI Application Form',
        'rent_agreement': 'Rent Agreement Form',
        'employment_contract': 'Employment Contract Form',
        'will_testament': 'Will & Testament Form'
    };
    
    modalTitle.textContent = formTitles[formType] || 'Legal Form';
    
    // Generate form fields based on type
    modalBody.innerHTML = generateFormFields(formType);
    
    modal.show();
}

function generateFormFields(formType) {
    const commonFields = `
        <div class="mb-3">
            <label class="form-label">Your Full Name</label>
            <input type="text" class="form-control" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Your Address</label>
            <textarea class="form-control" rows="3" required></textarea>
        </div>
    `;
    
    const specificFields = {
        'consumer_complaint': `
            <div class="mb-3">
                <label class="form-label">Company/Seller Name</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Product/Service Details</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Issue Description</label>
                <textarea class="form-control" rows="4" required></textarea>
            </div>
            <div class="mb-3">
                <label class="form-label">Amount Involved</label>
                <input type="number" class="form-control" required>
            </div>
        `,
        'legal_notice': `
            <div class="mb-3">
                <label class="form-label">Recipient Name</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Recipient Address</label>
                <textarea class="form-control" rows="3" required></textarea>
            </div>
            <div class="mb-3">
                <label class="form-label">Nature of Dispute</label>
                <select class="form-control" required>
                    <option value="">Select...</option>
                    <option value="payment">Payment Default</option>
                    <option value="breach">Breach of Contract</option>
                    <option value="property">Property Dispute</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label">Demand/Relief Sought</label>
                <textarea class="form-control" rows="4" required></textarea>
            </div>
        `,
        'rti_application': `
            <div class="mb-3">
                <label class="form-label">Public Authority</label>
                <input type="text" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Information Sought</label>
                <textarea class="form-control" rows="4" required></textarea>
            </div>
            <div class="mb-3">
                <label class="form-label">Period of Information</label>
                <input type="text" class="form-control" placeholder="e.g., Last 2 years" required>
            </div>
        `
    };
    
    return `
        <form id="legalForm">
            ${commonFields}
            ${specificFields[formType] || ''}
            <div class="text-end">
                <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary">Generate Document</button>
            </div>
        </form>
    `;
}

// Handle form submission
document.addEventListener('submit', function(e) {
    if (e.target.id === 'legalForm') {
        e.preventDefault();
        
        // Collect form data
        const formData = new FormData(e.target);
        
        // Show success message
        alert('Document generated successfully! In a real application, this would create a PDF for download.');
        
        // Close modal
        bootstrap.Modal.getInstance(document.getElementById('formModal')).hide();
    }
});
</script>
{% endblock %}